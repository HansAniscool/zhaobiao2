<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>错误 - {{ app_name }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="error-container">
        <div class="error-card">
            <div class="error-icon">
                {% if error.status_code >= 500 %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--danger-color);">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="8" x2="12" y2="12"></line>
                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                    </svg>
                {% elif error.status_code >= 400 %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--warning-color);">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="8" x2="12" y2="12"></line>
                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                    </svg>
                {% else %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--secondary-color);">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="8" x2="12" y2="12"></line>
                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                    </svg>
                {% endif %}
            </div>
            
            <h1 class="error-title">
                {% if error.status_code == 404 %}
                    页面不存在
                {% elif error.status_code == 403 %}
                    禁止访问
                {% elif error.status_code == 401 %}
                    请先登录
                {% elif error.status_code == 500 %}
                    服务器错误
                {% elif error.status_code == 429 %}
                    请求过于频繁
                {% elif error.status_code == 413 %}
                    文件过大
                {% else %}
                    发生了错误
                {% endif %}
            </h1>
            
            <p class="error-message">
                {% if error.message %}
                    {{ error.message }}
                {% else %}
                    {% if error.status_code == 404 %}
                        您访问的页面不存在或已被删除。
                    {% elif error.status_code == 403 %}
                        您没有权限访问此页面。
                    {% elif error.status_code == 401 %}
                        请登录后继续访问。
                    {% elif error.status_code == 500 %}
                        服务器内部发生错误，请稍后再试或联系管理员。
                    {% elif error.status_code == 429 %}
                        为了保护系统安全，请稍后再试。
                    {% elif error.status_code == 413 %}
                        上传文件大小不能超过16MB。
                    {% else %}
                        抱歉，发生了未预期的错误。
                    {% endif %}
                {% endif %}
            </p>
            
            <div class="error-code">
                错误代码: {{ error.status_code | default('UNKNOWN') }}
            </div>
            
            <div class="error-actions">
                <a href="{{ url_for('tenders.index') }}" class="btn btn-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                    返回首页
                </a>
                <button onclick="history.back()" class="btn btn-secondary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="19" y1="12" x2="5" y2="12"></line>
                        <polyline points="12 19 5 12 12 5"></polyline>
                    </svg>
                    返回上页
                </button>
            </div>
            
            {% if error.status_code >= 500 %}
            <div class="error-help">
                <p>如果问题持续存在，请联系技术支持或稍后重试。</p>
                <p class="error-time">{{ current_year }} {{ app_name }} v{{ app_version }}</p>
            </div>
            {% endif %}
        </div>
    </div>
    
    <style>
        .error-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            background: var(--bg-color);
        }
        
        .error-card {
            background: var(--card-bg);
            border-radius: var(--radius-lg);
            padding: 3rem 2rem;
            text-align: center;
            max-width: 480px;
            width: 100%;
            box-shadow: var(--shadow-lg);
        }
        
        .error-icon {
            margin-bottom: 1.5rem;
        }
        
        .error-title {
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }
        
        .error-message {
            color: var(--text-secondary);
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }
        
        .error-code {
            display: inline-block;
            background: var(--bg-color);
            color: var(--text-secondary);
            padding: 0.5rem 1rem;
            border-radius: var(--radius);
            font-size: 0.875rem;
            font-family: monospace;
            margin-bottom: 2rem;
        }
        
        .error-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .error-actions .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .error-help {
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-color);
        }
        
        .error-help p {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
        }
        
        .error-time {
            font-size: 0.75rem;
            color: var(--text-light);
        }
        
        @media (max-width: 640px) {
            .error-card {
                padding: 2rem 1.5rem;
            }
            
            .error-actions {
                flex-direction: column;
            }
            
            .error-actions .btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</body>
</html>
