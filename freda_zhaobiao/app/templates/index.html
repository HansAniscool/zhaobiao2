{% extends "base.html" %}

{% block content %}
<div class="hero">
    <h1>æ‹›æ ‡ä¿¡æ¯æ”¶é›†ç³»ç»Ÿ</h1>
    <p>é«˜æ•ˆæ”¶é›†ã€æ•´ç†å„çº§æ”¿åºœå‘å¸ƒçš„æ‹›æ ‡ä¿¡æ¯</p>
    
    <form action="{{ url_for('tenders.search') }}" method="GET" class="search-form">
        <div class="search-box">
            <input type="text" name="q" class="search-input" placeholder="è¾“å…¥å…³é”®è¯æœç´¢æ‹›æ ‡ä¿¡æ¯...">
            <button type="submit" class="search-btn">æœç´¢</button>
        </div>
    </form>
</div>

<section class="section">
    <div class="section-header">
        <h2>æœ€æ–°æ‹›æ ‡ä¿¡æ¯</h2>
        <a href="{{ url_for('tenders.search') }}" class="more-link">æŸ¥çœ‹æ›´å¤š â†’</a>
    </div>
    
    {% if tenders %}
    <div class="tender-list">
        {% for tender in tenders %}
        <div class="tender-card">
            <div class="tender-header">
                <a href="{{ url_for('tenders.tender_detail', tender_id=tender.id) }}" class="tender-title">
                    {{ tender.title }}
                </a>
                {% if tender.category %}
                <span class="tender-category">{{ tender.category }}</span>
                {% endif %}
            </div>
            <div class="tender-meta">
                {% if tender.organization %}
                <span class="meta-item">ğŸ¢ {{ tender.organization }}</span>
                {% endif %}
                {% if tender.publish_date %}
                <span class="meta-item">ğŸ“… {{ tender.publish_date.strftime('%Y-%m-%d') }}</span>
                {% endif %}
            </div>
            {% if tender.summary %}
            <p class="tender-summary">{{ tender.summary[:150] }}{% if tender.summary|length > 150 %}...{% endif %}</p>
            {% endif %}
            <div class="tender-footer">
                {% if tender.source_url %}
                <a href="{{ tender.source_url }}" target="_blank" class="source-link">æŸ¥çœ‹åŸæ–‡ â†’</a>
                {% endif %}
                {% if current_user.is_authenticated %}
                <button class="favorite-btn" data-tender-id="{{ tender.id }}">
                    â­
                </button>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <p>æš‚æ— æ‹›æ ‡ä¿¡æ¯</p>
        <a href="{{ url_for('tenders.search') }}" class="btn btn-primary">å¼€å§‹æœç´¢</a>
    </div>
    {% endif %}
</section>

<section class="section">
    <div class="section-header">
        <h2>æœç´¢å†å²</h2>
        <a href="{{ url_for('tenders.search_history') }}" class="more-link">æŸ¥çœ‹å…¨éƒ¨ â†’</a>
    </div>
    
    {% if recent_history %}
    <div class="history-list">
        {% for history in recent_history %}
        <div class="history-item">
            <div class="history-info">
                <a href="{{ url_for('tenders.search') }}?q={{ history.query }}&crawl=false" class="history-query">
                    {{ history.query }}
                </a>
                <div class="history-meta">
                    <span class="history-time">{{ history.created_at.strftime('%Y-%m-%d %H:%M') }}</span>
                    <span class="history-count">æ‰¾åˆ° {{ history.result_count }} æ¡è®°å½•</span>
                </div>
            </div>
            <div class="history-actions">
                <a href="{{ url_for('tenders.search') }}?q={{ history.query }}&crawl=true" class="btn btn-secondary btn-sm">é‡æ–°æœç´¢</a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <p>æš‚æ— æœç´¢å†å²</p>
        <a href="{{ url_for('tenders.search') }}" class="btn btn-primary">å¼€å§‹æœç´¢</a>
    </div>
    {% endif %}
</section>

<section class="section features">
    <h2>ç³»ç»ŸåŠŸèƒ½</h2>
    <div class="feature-grid">
        <div class="feature-card">
            <div class="feature-icon">ğŸ”</div>
            <h3>æ™ºèƒ½æœç´¢</h3>
            <p>æ”¯æŒå…³é”®è¯æœç´¢ï¼Œå¿«é€Ÿå®šä½ç›®æ ‡æ‹›æ ‡ä¿¡æ¯</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ“¥</div>
            <h3>æ‰¹é‡å¯¼å…¥</h3>
            <p>æ”¯æŒExcelæ–‡ä»¶æ‰¹é‡å¯¼å…¥ï¼Œæ–¹ä¾¿æ•°æ®è¿ç§»</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ¤–</div>
            <h3>è‡ªåŠ¨é‡‡é›†</h3>
            <p>é…ç½®çˆ¬è™«ä»»åŠ¡ï¼Œè‡ªåŠ¨é‡‡é›†æ”¿åºœç½‘ç«™æ‹›æ ‡ä¿¡æ¯</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">â­</div>
            <h3>æ”¶è—ç®¡ç†</h3>
            <p>æ”¶è—é‡è¦æ‹›æ ‡ä¿¡æ¯ï¼Œæ–¹ä¾¿åç»­è·Ÿè¸ª</p>
        </div>
    </div>
</section>
{% endblock %}
